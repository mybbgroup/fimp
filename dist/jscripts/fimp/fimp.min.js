/**
 * Fancy Inline Moderation Popup
 * @description A jQuery MyBB addon to make inline moderation tool modern and fancy
 * @author effone <effone@mybb.com>
 * @copyright MyBB Group https://mybb.group
 * @license MIT
 */

$(function(){var t,i,e;$("form[action^=moderation]").length&&($("body").append('<div id="fimp" class="control-group"><span></span></div>'),t=$("input[id^=inlinemod]"),i=$("form[action^=moderation]:first"),i.hide().find("option").each(function(){var t=$(this).val().replace(/threads|posts/gi,"");$("#fimp").append('<button class="fimp" title="{t}" data-action="{v}">{l}</button>'.replace("{t}",$(this).text()).replace("{v}",$(this).val()).replace("{l}",'<svg class="icon"><use href="jscripts/fimp/fimp.svg#{i}" /></svg>'.replace("{i}",t)))}),(e=function(t){$("#fimp").find("span").text(t),t<2?$(".fimp[data-action=multimergeposts]").attr("disabled",!0):$(".fimp[data-action=multimergeposts]").removeAttr("disabled"),0<t?$("#fimp").fadeIn():$("#fimp").fadeOut()})(t.filter(":checked").length),t.on("change",function(){e(t.filter(":checked").length)}),$(".fimp").on("click",function(){i.find('option[value="'+$(this).data("action")+'"]').attr("selected","selected").parents("form").trigger("submit"),$("#fimp>span").html("<span class='loader'>")}),$("#fimp>span").on("click",function(){inlineModeration.clearChecked(),t.trigger("change")}))});